<div ng-style='computePositions()'  resize>

    <div class = "card-panel linkCard md-whiteframe-10dp"
    ng-repeat='dump in dumps track by dump._id'
    ng-if = "([dump] | filter:enteredFind).length > 0">

        <!-- This need to be only noembed, and another div should be created under for embedly, followed by various native apis -->
        <!-- Use our Fallbacks (NoEmbed And then Embedly), Display Media Embeds (Bandcamp, Youtube, Vimeo, etc... -->
        <div class = "embed"
        ng-if = "(dump.content.indexOf('https://www.youtube.com/watch?v=') > -1)
            || (dump.content.indexOf('http://www.amazon.com/') > -1)
            || (dump.content.indexOf('https://instagram.com/p/') > -1)
            || (dump.content.indexOf('wikipedia.org/wiki/') > -1)
            || (dump.content.indexOf('https://vimeo.com/') > -1)
            || (dump.content.indexOf('https://twitter.com/') > -1 && dump.content.indexOf('/status/') > -1)
            || (dump.content.indexOf('https://gist.github.com/') > -1)"
            id = "embed-{{::dump.content}}"
            in-view = "$inview && !dump.lazyEmbed && getEmbed(dump)">
        </div>

        <!-- Image Files -->
        <div class = "embed"
        ng-if = "(dump.content.indexOf('.jpg') > -1)
            || (dump.content.indexOf('.png') > -1)
            || (dump.content.indexOf('.gif') > -1)"
            in-view = "$inview && !dump.lazyEmbed && getImage(dump)">
            <img id = "img-{{::dump.content}}" />
        </div>

        <!-- Soundcloud -->
        <div class = "embed"
        ng-if = "(dump.content.indexOf('https://soundcloud.com/') > -1)"
            in-view = "$inview && !dump.lazyEmbed && getSoundCloud(dump)">
            <div class = "noembed-soundcloud">
                <iframe
                id = "scWidget-{{::dump.content}}"
                width = "100%" height = "450"
                frameborder="0" scrolling="no">
                </iframe>
            </div>
        </div>

        <!-- KickStarter -->
        <div class = "embed"
        ng-if = "(dump.content.indexOf('https://www.kickstarter.com/projects/') > -1)"
            in-view = "$inview && !dump.lazyEmbed && getKickStarter(dump)">
            <iframe
            id = "kick-{{::dump.content}}"
            class = "kickEmbed"
            frameborder="0" scrolling="no">
            </iframe>
        </div>

        <!-- Vine -->
        <div class = "embed"
        ng-if = "(dump.content.indexOf('https://vine.co/v/') > -1)"
            in-view = "$inview && !dump.lazyEmbed && getVine(dump)">
            <iframe
            id = "vine-{{::dump.content}}"
            class = "vineEmbed"
            frameborder="0" scrolling="no">
            </iframe>
        </div>

        <!-- Spotify -->
        <div class = "embed"
        ng-if = "(dump.content.indexOf('https://play.spotify.com/') > -1)
            || (dump.content.indexOf('https://open.spotify.com/') > -1)"
            in-view = "$inview && !dump.lazyEmbed && getSpotify(dump)">
            <iframe
            id = "spotify-{{::dump.content}}"
            class = "spotifyEmbed"
            frameborder="0" scrolling="no">
            </iframe>
        </div>

        <!-- Get our favicon and link title -->
        <img ng-src="{{::dump.content | favicon}}" alt="Drop Icon" class = "dropFavicon">
        <a id = "linkTitle-{{::$index}}"
        href="{{::dump.content}}" target="_blank"
        class = "dropURL"
        ng-init = "getTitle(dump, $index)">
        {{dump.content}}
        </a>

        <br>
        <!-- Sharing/Categories -->
        <div class = "linkSubTextLeftContainer">
            <p ng-repeat="label in dump.labels"
            class = "linkSubText">
                <img src="images/x.png"
                class="linkLabelDelete"
                ng-click="removeLabel(dump, label)">

                <a class="linkLabelText"
                ng-click="filterLabel(label)">{{label.title}}
                </a>
            </p>
            <br />
            <form>
                <md-input-container class = "labelInputContainer">
                    <label>New Label</label>
                    <input name="newLabel" class = "labelInput" type="text" class="validate" ng-model = "dump.newLabel">
                </md-input-container>
                <button type = "submit" style = "display: none"
                ng-click="submitLabel(dump)">
                </button>
            </form>
        </div>
        <!-- Last updated -->
        <div class = "linkSubTextRightContainer">
            <p class = "linkSubText" ng-bind="dump.updated_at | date:'h:mm MM/dd/yyyy '"></p>
            <a class = "deleteDump" ng-click = "removeLink(dump)"><p>Delete Drop</p></a>
        </div>

    </div>

</div>
